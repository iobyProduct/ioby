!function(v){Drupal.behaviors.iobytheme={attach:function(e,t){function i(e){v(e).hover(function(){v(this).children(".extra-info").addClass("is-active")},function(){v(this).children(".extra-info").removeClass("is-active")})}function a(e){if(0<v("#"+e+"-D").length)return v("#"+e+"-D").find(".errMsg").remove(),!!v("#"+e).val()||(v("#"+e+"-D").append('<div id="'+e+'-E" class="errMsg"><span>This field is required.</span></div>'),!1)}function n(e){ga("send","event",e.category.toLowerCase(),e.action.toLowerCase(),e.label.toLowerCase())}v(".page-add-project-step-2 fieldset.filter-wrapper").remove(),v(".node-project_2-form .location .form-item-field-project-address-und-0-locpick-user-latitude").remove(),v(".node-project_2-form .location .form-item-field-project-address-und-0-locpick-user-longitude").remove(),v(".node-project_2-form .location .location-current-coordinates-fieldset").remove(),v("a.login",e).click(function(){return v(this).toggleClass("activated").siblings(".region").fadeToggle("fast"),!1}),""!=v("#edit-search-block-form--2").val()&&v("#search-block-form label").hide(),v("#search-block-form label, #mc_embed_signup label, #mc_home_embed_signup label").click(function(){v(this).fadeOut("fast").next("input").focus()}),v("#search-block-form input, #mc_embed_signup input, #mc_home_embed_signup input").focus(function(){v(this).prev("label:visible").fadeOut("fast")}).blur(function(){""==v(this).val()&&v(this).prev("label").fadeIn("fast")}),v("body.page-add-project-step-2 .preview").length&&(v(".ioby-step-indicator li").removeClass("current").last().addClass("current"),v(".preview h3:first-child:visible").hide()),v("body.node-type-project-2 .project-tabs li a").click(function(){return v(this).parent("li").hasClass("active")||(v(".project-tabs li").removeClass("active"),v(this).parent("li").addClass("active"),v(".pane:visible").hide(),v(v(this).attr("href")).show()),!1}),i(".project-miniview"),v("body.node-type-project-2").length&&location.hash.length&&(my_query=location.hash.substr(1).split("/"),v(".pane[id='"+my_query[0]+"']").length&&(v(".project-tabs li").removeClass("active"),v(".project-tabs li a[href='#"+my_query[0]+"']").parent("li").addClass("active"),v(".pane:visible").hide(),v("#"+my_query[0]).show(0,function(){if("updates"==my_query[0]&&1<my_query.length){update_id=my_query[1];var e=v("article#update-"+update_id).offset().top;v("html:not(:animated),body:not(:animated)").animate({scrollTop:e-30},500)}}))),v("body.node-type-project-2 a.updates-jump").click(function(){return v(".project-tabs li a[href='#updates']").click(),!1}),v("body.node-type-project-2 .sponsor-ribbon").insertAfter("#pageheader").delay("2000").slideDown("slow"),v("#display_links a:not(.processed,.last)",e).click(function(){return v.ajax({type:"GET",url:this.href,context:this,success:function(e){v("#project_display").html(e.projects),v(".current").removeClass("current"),v(this).addClass("current"),i(".project-miniview")},dataType:"json",data:"js=1"}),!1}).addClass("processed"),v("#display_links ul.tabs div").click(function(){v(this).parent().click()}),v(".view-header a.browse-switch").click(function(){new_href=v(this).attr("href")+location.search,v(this).attr("href",new_href)}),v(".project-microview h3").each(function(){margin=(v(this).parent().height()-v(this).height())/2,v(this).css("marginTop",parseInt(margin)-3)}),v(".field-name-field-with-group input").click(function(){(0==v(this).val()&&v("fieldset.group-info .fieldset-wrapper:first:visible").length||1==v(this).val()&&v("fieldset.group-info .fieldset-wrapper:first:hidden").length)&&v("fieldset.group-info legend:first a").click()}),v(".field-name-field-group-503 input").click(function(){(0==v(this).val()&&v("fieldset.group-tax-info .fieldset-wrapper:visible").length||1==v(this).val()&&v("fieldset.group-tax-info .fieldset-wrapper:hidden").length)&&v("fieldset.group-tax-info legend a").click()}),v(".field-name-field-group-tax-fisc-ioby").hide(),v(".field-name-field-group-tax-fiscal input").click(function(){0==v(this).val()?(v(".field-name-field-group-tax-fisc-ioby:hidden").show(),v(".field-name-field-group-tax-fisc-spon:visible").hide()):(v(".field-name-field-group-tax-fisc-ioby:visible").hide(),v(".field-name-field-group-tax-fisc-spon:hidden").show())}),v(".field-name-field-project-volunteers input").click(function(){(0==v(this).val()&&v("fieldset.group-volunteer-info .fieldset-wrapper:visible").length||1==v(this).val()&&v("fieldset.group-volunteer-info .fieldset-wrapper:hidden").length)&&v("fieldset.group-volunteer-info legend a").click()}),v("#edit-field-project-inbrief textarea").change(function(){v("span.inbrief-length").html(v(this).val().length)}),trueRemove=!1,null!=Drupal.settings.iobypopup&&v(".page-cart .views-field-line-item-title:contains('gratuity')").length&&1<v("td.views-field").length&&v(".page-cart .views-field-line-item-title:contains('gratuity')").siblings(".views-field-edit-delete").children("input.delete-line-item").click(function(){return!!trueRemove||(remove_element=v(this),v("#dialog").remove(),v(this).prepend('<div id="dialog" class="region-content content">'+Drupal.settings.iobypopup.iobypopupGratuityRemove+"</div>"),v("#dialog").dialog({buttons:{remove:function(){trueRemove=!0,remove_element.click()},"include gratuity":function(){v(this).dialog("close").remove()}},closeOnEscape:!1,modal:!0,open:function(){v(".ui-dialog").find("button:last").focus()},resizable:!1}),!1)}),v.isFunction(v.colorbox)&&null!=Drupal.settings.iobypopup&&v(".page-cart .views-field-line-item-title:contains('gratuity')").once("linked").prepend('<div style="display:none"><div id="gratuity-info-popup" class="region-content content">'+Drupal.settings.iobypopup.iobypopupGratuityInfo+"</div></div>").append(' <a href="#gratuity-info-popup" class="colorbox-load">what\'s this?</a>').children("a").colorbox({innerWidth:500,inline:!0}),v("#iobyproject-donation-form").submit(function(){if(!v(this).find("#edit-donation").val().match(/^\d+(\.\d{2})?$/))return alert("To give to this project, please enter a valid dollar amount."),v(this).find("#edit-donation").focus(),!1}),0<v(".idea-tabs .tabs a.tab").length&&(v(".idea-tabs .tabs a.tab").click(function(e){this==v("li.about-you a")[0]?($valid1=a("tfa_10"),$valid2=a("tfa_11"),$valid3=a("tfa_14"),$valid1&&$valid2&&$valid3?(v(".idea-tabs .tabs a.tab.active").removeClass("active"),v(this).addClass("active"),this.hasAttribute("href")&&0<v(this).attr("href").length&&(href=v(this).attr("href"),0<href.length&&0<v(".idea-panel"+href).length&&(v(".wFormContainer .idea-panel.active").removeClass("active"),v(".idea-panel"+href).addClass("active")))):(v("li.about-you-disabled").removeClass("hidden"),v("li.about-you").addClass("hidden"),v(window).scrollTop(v("#step1").offset().top))):v(this).hasClass("active")||(v(".idea-tabs .tabs a.tab.active").removeClass("active"),v(this).addClass("active"),this.hasAttribute("href")&&0<v(this).attr("href").length&&(href=v(this).attr("href"),0<href.length&&0<v(".idea-panel"+href).length&&(v(".wFormContainer .idea-panel.active").removeClass("active"),v(".idea-panel"+href).addClass("active"))))}),v(".idea-tabs .panel-button").click(function(e){this==v(".button.panel-button.next-button")[0]?($valid1=a("tfa_10"),$valid2=a("tfa_11"),$valid3=a("tfa_14"),$valid1&&$valid2&&$valid3?(v("li.about-you-disabled").addClass("hidden"),v("li.about-you").removeClass("hidden"),v(".idea-tabs .tabs a.tab.active").removeClass("active"),this.hasAttribute("href")&&0<v(this).attr("href").length&&(href=v(this).attr("href"),0<href.length&&0<v(".idea-panel"+href).length&&(v(".wFormContainer .idea-panel.active").removeClass("active"),v(".idea-panel"+href).addClass("active"),v(".idea-tabs a.tab[href="+href+"]").addClass("active")))):(v("li.about-you-disabled").removeClass("hidden"),v("li.about-you").addClass("hidden"),v(window).scrollTop(v("#step1").offset().top))):(v(".idea-tabs .tabs a.tab.active").removeClass("active"),this.hasAttribute("href")&&0<v(this).attr("href").length&&(href=v(this).attr("href"),0<href.length&&0<v(".idea-panel"+href).length&&(v(".wFormContainer .idea-panel.active").removeClass("active"),v(".idea-panel"+href).addClass("active"),v(".idea-tabs a.tab[href="+href+"]").addClass("active"))))}),first_name=v("#user_data").data("first-name"),first_name&&v(".wFormContainer input#tfa_1").val(first_name),last_name=v("#user_data").data("last-name"),last_name&&v(".wFormContainer input#tfa_2").val(last_name),email=v("#user_data").data("email"),email&&v(".wFormContainer input#tfa_5").val(email)),0<v("#block-ioby-ioby-project-creation-indicator").length&&(current_path=window.location.pathname.toLowerCase(),v("#block-ioby-ioby-project-creation-indicator .ioby-step-indicator li").each(function(e){$li=v(this),$a=v(this).find("a"),0<$a.length&&(a_lower=$a.attr("href").toLowerCase(),-1!==a_lower.indexOf(current_path)&&$li.addClass("current"))})),v("a#quicktabs-tab-campaign_projects-1").click(function(){elEv=[],elEv.category="switch to map",elEv.action="click-map",elEv.label=window.location.pathname,n(elEv)}),v(".region-footer #block-block-1 .social li a").click(function(){elEv=[],elEv.category="footer social click",elEv.action="click-"+v(this).attr("class"),elEv.label=window.location.pathname,n(elEv)}),v(".block-multistep .active-step").parent("li").addClass("current"),v("#project-2-node-form .form-submit").addClass("button"),v(".or-after").after('<div class="or-divider"><span>Or</span><hr /></div>')}},v(function(){-1<window.location.href.indexOf("actioncorps")&&v("td").not(":has(p)").addClass("empty-td")}),v(function(){v(".hamburger").click(function(){v(this).toggleClass("is-active"),v("#off-canvas").toggleClass("slide-in")})}),v(function(){v("#page").fitVids(),v("span.nolink").click(function(){v(".hidden-2").toggleClass("show")})}),v(document).ready(function(){if(v(".hero").length){for(var e=v(".hero__text").attr("data-words").split(","),t=e.length;t--;)e[t]=e[t]+"&nbsp;";new Typed(".active-text",{strings:e,typeSpeed:80,showCursor:!0,backDelay:1200,startDelay:300,fadeOut:!0,loop:!0})}}),v(document).ready(function(){var t=v(".offcanvas"),i=v(".page-header__offcanvas-trigger"),a=v(".offcanvas__close"),n=v(document),o=v("body"),s=v(".page-wrapper"),l=v(".offcanvas__content"),r=l.height();v(".offcanvas__primary-nav .expanded").each(function(e){v(this).find("ul").slideUp(),v(this).hasClass("active")&&v(this).find("ul").slideDown()}),v(".expanded > span").bind("click",function(){n.unbind("click touchstart",f),v(this).parent().toggleClass("is-open"),v(window).width()<1140?(v(this).siblings("ul").slideToggle(),setTimeout(function(){r=l.height(),s.height(r)},400)):setTimeout(function(){n.bind("click touchstart",f)},400)});var c=function(e){void 0!==e.which&&27===e.which&&h()},d=function(e){v(e.target).closest(".offcanvas").length||h()},f=function(e){v(e.target).closest(".page-header__primary-nav .expanded ul").length||p()},h=function(e){i.unbind("click touchstart"),v(".offcanvas__primary-nav").find(".is-open").removeClass("is-open"),v(".offcanvas__primary-nav").find("a").siblings("ul").slideUp(),t.removeClass("is-open"),o.removeClass("offcanvas-open"),n.unbind("keydown",c),n.unbind("click touchstart",d),setTimeout(function(){i.bind("click touchstart",function(e){u(e)})},500)},p=function(e){v(".page-header__primary-nav").find(".is-open").removeClass("is-open"),n.unbind("click touchstart",f)},u=function(e){a.unbind("click touchstart"),t.addClass("is-open"),r=l.height(),o.addClass("offcanvas-open"),s.height(r),n.keydown(c),setTimeout(function(){n.bind("click touchstart",d)},200),setTimeout(function(){a.bind("click touchstart",function(e){h(e)})},500)};u(),setTimeout(function(){h()},750),setTimeout(function(){t.removeClass("displaynone")},1e3),i.bind("click touchstart",function(e){u(e)})})}(jQuery);